def gen_testpattern(width):
    wm2 = width - 2
    return bytes(
        [0xff] * width +
        [0x01] + [0] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80]+
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80] +
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80] +
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80] +
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80] +
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0x55] * wm2 + [0x80] +
        [0x01] + [0xaa] * wm2 + [0x80] +
        [0x01] + [0] * wm2 + [0x80] +
        [0xff] * width +

        [0x80]*width +
        [0x40]*width +
        [0x20]*width +
        [0x10]*width +
        [0x08]*width +
        [0x04]*width +
        [0x02]*width +
        [0x01]*width +

        [0xc0]*width +
        [0x60]*width +
        [0x30]*width +
        [0x18]*width +
        [0x0c]*width +
        [0x06]*width +
        [0x03]*width +
        [0x00]*width
    )
